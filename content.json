{"meta":{"title":"yobome's blog","subtitle":"Programmer","description":"明日も晴れるかな","author":"Emo","url":"https://yobome.top","root":"/"},"pages":[{"title":"about","date":"2020-04-07T17:11:47.000Z","updated":"2020-04-15T07:22:31.558Z","comments":false,"path":"about/index.html","permalink":"https://yobome.top/about/index.html","excerpt":"","text":"Programmer/ Music Lover/ Gamer/ Reader."},{"title":"categories","date":"2020-04-06T11:39:59.000Z","updated":"2020-04-06T11:42:37.532Z","comments":false,"path":"categories/index.html","permalink":"https://yobome.top/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-04-06T11:38:42.000Z","updated":"2020-04-06T11:42:29.459Z","comments":false,"path":"tags/index.html","permalink":"https://yobome.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Redis 笔记（五）：string","slug":"redis-string","date":"2020-04-18T08:31:11.000Z","updated":"2020-04-18T08:33:26.932Z","comments":true,"path":"2020/04/18/redis-string/","link":"","permalink":"https://yobome.top/2020/04/18/redis-string/","excerpt":"","text":"string 类型存储的数据：单个数据，最简单的、最常用的数据存储类型存储数据的格式：一个存储空间保存一个数据存储内容：通常使用字符串，如果字符串以整数的形式展示，可以作为数字操作使用string 类型数据的基本操作添加/修改数据：set key value获取数据：get key删除数据：del key添加/修改多个数据：mset key1 value1 key2 value2 ...获取多个数据：mget key1 key2 ...获取数据字符个数（字符串长度）：strlen key追加信息到原始信息后部（如果原始信息存在就追加，否则新建）：append key valuestring 类型数据的扩展操作业务场景一大型企业级应用中，分表操作是基本操作，使用多张表存储同类型数据，但是对应的主键 id 必须保证统一性，不能重复。 Orade数据库具有 sequence 设定，可以解决该问题，但是 MySQL 数据库并不具有类似的机制，那么如何解决？解决方案设置数值数据增加指定范围的值（只能操作整数）incr key incrby key increment incrbyfloat key increment设置数值数据减少指定范围的值desc key descby key incrementstring 作为数值操作string 在 redis 内部存储默认就是一个字符串，当遇到増减类操作 inr, decr 时会转成数值型进行计算。redis 所有的操作都是原子性的，采用单线程处理所有业务，命令是一个一个执行的，因此无需考虑并发带来的数据影响注意：按数值进行操作的数据，如果原始数据不能转成数值，或超越了 redis 数值上限范围，将报错。92233720368547758070 （java 中 long 型数据最大值，Long. MAX_VALUETips 1:redis用于控制数据库表主键 id，为数据库表主键提供生成策略，保证数据库表的主键唯一性此方案适用于所有数据库，且支持数据库集群。业务场景二「最强女生」启动海选投票，只能通过微信投票，每个微信号每 4 小时只能投 1 票。电商商家开启热门商品推荐，热门商品不能一直处于热门期，每种商品热门期维持 3 天，3 天后自动取消热门。新闻网站会出现热点新闻，热点新闻最大的特征是时效性，如何自动控制热点新闻的时效性。解决方案设置数据具有指定的生命周期setex key seconds value psetex key milliseconds valueTips 2:redis 控制数据的生命周期，通过数据是否失效控制业务行为，适用于所有具有时效性限定控制的操作string 类型数据操作的注意事项数据操作不成功的反馈与数据正常操作之间的差异表示裕兴结果是否成功(integer)0 -&gt; false 失败(integer)1 -&gt; true 成功表示运行结果值(integer)3 -&gt; 3 3个(integer)1 -&gt; 1 1个数据未获取到(nil) 等同于 null数据最大存储量512MB数据计算最大范围（java 中 long 的最大值）92233720368547758070string 类型应用场景业务场景主页高频访问信息显示控制，例如新浪微博大 V 主页显示粉丝数与微博数量解决方案在 redis 中为大 V 用户设定用户信息，以用户主键和属性值作为 key，后台设定定时刷新策略即可eg: user:id:3506728370:fans22 12210947 eg: user:id:3506728370:blogs 6164 eg: user:id:3506728370:focuss 83在 redis 中以 json 格式存储大 V 用户信息，定时刷新（也可以使用 hash 类型）eg: user:id:3506728370 {&quot;id&quot;:3506728370,&quot;name&quot;:&quot;春晚&quot;,&quot;fans&quot;:12210862,&quot;blogs&quot;:6164, &quot;focus&quot;:83}Tips 3：redis应用于各种结构型和非结构型高热度数据访问加速key 的设置约定数据库中的热点数据key命名惯例表名:主键名:主键值:字段名eg1:order:id:123456:name","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"IT","slug":"Tech/IT","permalink":"https://yobome.top/categories/Tech/IT/"},{"name":"Database","slug":"Tech/IT/Database","permalink":"https://yobome.top/categories/Tech/IT/Database/"}],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://yobome.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"redis","slug":"redis","permalink":"https://yobome.top/tags/redis/"}]},{"title":"Redis 笔记（四）：Redis 数据类型","slug":"redis-datatype","date":"2020-04-16T16:33:30.000Z","updated":"2020-04-18T08:32:17.758Z","comments":true,"path":"2020/04/17/redis-datatype/","link":"","permalink":"https://yobome.top/2020/04/17/redis-datatype/","excerpt":"","text":"Redis 数据类型Redis 数据存储类型介绍业务数据的特殊性作为缓存使用原始业务功能设计秒杀618 活动双十一活动运营平台监控到的突发高频访问数据突发时政要闻，被强势关注围观高频、复杂的统计数据在线人数投票排行榜附加功能系统功能优化、升级：单服务器升级集群Session 管理Token 管理Redis 数据类型（五种常用）stringhashlistsetsorted_setredis 数据存储格式redis 自身是一个 Map，其中所有的数据都采用 key: value 的形式存储数据类型指的是存储的数据的类型，也就是 value 部分的类型，key 部分永远都是字符串","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"IT","slug":"Tech/IT","permalink":"https://yobome.top/categories/Tech/IT/"},{"name":"Database","slug":"Tech/IT/Database","permalink":"https://yobome.top/categories/Tech/IT/Database/"}],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://yobome.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"redis","slug":"redis","permalink":"https://yobome.top/tags/redis/"}]},{"title":"Redis 笔记（三）：Redis 常用命令","slug":"redis-operation","date":"2020-04-16T16:33:20.000Z","updated":"2020-04-17T00:51:15.984Z","comments":true,"path":"2020/04/17/redis-operation/","link":"","permalink":"https://yobome.top/2020/04/17/redis-operation/","excerpt":"","text":"Redis 基本操作信息添加功能：设置 key，value 数据命令：set value key范例：set name testname信息查询功能：根据key查询对应的vaue，如果不存在，返回空（nil）命令：get key范例：get name帮助功能：获取命令帮助文档，获取组中所有命令信息名称命令：help 命令名称 help @组名退出客户端命令行模式功能：退出客户端命令：quit exit &lt;ESC&gt;","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"IT","slug":"Tech/IT","permalink":"https://yobome.top/categories/Tech/IT/"},{"name":"Database","slug":"Tech/IT/Database","permalink":"https://yobome.top/categories/Tech/IT/Database/"}],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://yobome.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"redis","slug":"redis","permalink":"https://yobome.top/tags/redis/"}]},{"title":"Redis 笔记（二）：Redis 安装与使用","slug":"redis-install","date":"2020-04-16T16:33:05.000Z","updated":"2020-04-17T00:51:12.939Z","comments":true,"path":"2020/04/17/redis-install/","link":"","permalink":"https://yobome.top/2020/04/17/redis-install/","excerpt":"","text":"在 Vbox 下安装了 Ubuntu Server 后，继续安装 redis，并通过端口映射到主机，使其可以被外部访问（在 Goland 中写代码可以通过 redis 相关的库直接连接、调用）安装通过 apt 包安装：sudo apt-get update sudo apt-get install redis-server通过源码安装：# 以下步骤如果报错提示 permission denied，请使用 root 权限。# “make test” 不是必需的步骤，如果嫌麻烦可以直接从第四步跳到第七步，也就是在 redis 文件夹中执行 make 后，直接 make install。1. wget http://download.redis.io/releases/redis-5.0.8.tar.gz 2. tar -zxvf redis-5.0.8.tar.gz 3. cd redis-5.0.8/ 4. make # 在编译完成后，输出信息的最后一行为 &quot;Hint: It&apos;s a good idea to run &apos;make test&apos; ;)&quot; # 此时如果输入 &quot;make test&quot; 会报错 &quot;You need tcl 8.5 or newer in order to run the Redis test&quot; # 正确做法是先安装最新版的 tcl 4.1 cd .. 4.2 wget https://prdownloads.sourceforge.net/tcl/tcl8.6.10-src.tar.gz 4.3 tar zvxf tcl8.6.10-src.tar.gz 4.4 cd tcl8.6.10/unix 4.5 ./configure 4.6 make 4.7 make install 5. cd ../redis-5.0.8/ 6. make test 7. make install Redis 命令说明自带二进制相关命令介绍redis-benchmark # 性能测试工具 redis-check-aof # 用于修复对应格式文件的命令 redis-check-rdb # 同上 redis-cli # 启动 redis 客户端 redis-sentinel # 哨兵模式 redis-server # 启动 redis 服务启动 Redis 服务redis-server redis.conf # 如不填写 &quot;redis.conf&quot; 则使用默认配置文件 # 这里建议单独建立一个文件夹，copy 一份 redis.conf 过去 # 用 copy 的配置文件启动，这样可以保证根目录的配置文件完整性 # 上述启动方式为前台启动，并不方便。此时可以修改配置文件改为后台启动。 vim redis.conf daemonize no -&gt; yes # 以守护进程的形式运行","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"IT","slug":"Tech/IT","permalink":"https://yobome.top/categories/Tech/IT/"},{"name":"Database","slug":"Tech/IT/Database","permalink":"https://yobome.top/categories/Tech/IT/Database/"}],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://yobome.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"redis","slug":"redis","permalink":"https://yobome.top/tags/redis/"}]},{"title":"Redis 笔记（一）：NoSQL 简介","slug":"redis-intro","date":"2020-04-16T16:27:25.000Z","updated":"2020-04-17T00:51:08.507Z","comments":true,"path":"2020/04/17/redis-intro/","link":"","permalink":"https://yobome.top/2020/04/17/redis-intro/","excerpt":"","text":"Redis 简介NoSQL 介绍问题现象海量用户高并发关系型数据库的缺点性能瓶颈：磁盘 IO 性能低下扩展瓶颈：数据关心复杂，扩展性差，不便于大规模集群解决思路降低磁盘IO次数 ———— 内存存储去除数据间关系 ———— 不存储关系，仅存储数据NoSQLNoSQL：即 Not-Only SQL（泛指非关系型数据库），作为关系型数据库的补充。作用：应对基于海量用户、数据前提下的数据处理特征：可扩容，可伸缩大数据量下高性能灵活的数据模型高可用常见 NoSQL 数据库：RedismemcacheHBaseMongoDBRedis 介绍概念：Redis（REmote Dictionary Server）是用 C 语言开发的一个开源的高性能键值对（key-value）数据库。特征：数据间没有必然的关联关系内部采用单线程机制进行工作高性能多数据类型支持字符串类型 string列表类型 list散列类型 hash集合类型 set有序集合类型 sorted_set持久化支持Redis 的应用为热点数据加速查询（主要场景），如热点商品、热点新闻、热点资讯、推广类等高访问量信息等任务队列，如秒杀、抢购、购票排队等即时信息查询，如各位排行榜、各类网站访问统计、公交到站信息、在线人数信息（聊天室、网站）、设备信号等时效性信息控制，如验证码控制、投票控制等分布式数据共享，如分布式集群架构中的 session分离消息队列分布式锁","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"IT","slug":"Tech/IT","permalink":"https://yobome.top/categories/Tech/IT/"},{"name":"Database","slug":"Tech/IT/Database","permalink":"https://yobome.top/categories/Tech/IT/Database/"}],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://yobome.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"redis","slug":"redis","permalink":"https://yobome.top/tags/redis/"}]},{"title":"Valine Admin 发送的邮件中的链接无法打开","slug":"valineadminissue","date":"2020-04-08T04:13:57.000Z","updated":"2020-04-08T04:21:47.551Z","comments":true,"path":"2020/04/08/valineadminissue/","link":"","permalink":"https://yobome.top/2020/04/08/valineadminissue/","excerpt":"","text":"Valine Admin 是 Valine 的修改版，相比原生 Valine 邮件通知功能更完善。原 Valine 发送的通知邮件里的按钮只能到达博客首页，无法到达相关文章页面；Valine Admin 还加入了垃圾评论过滤功能。在部署 Valine Admin 后，测试评论系统时，发现收到的通知邮件里的链接点击无效，无论是「查看回复的完整内容」还是开头的 blog 名。换邮箱、换 SMTP 服务器都无果，最后发现在云引擎的自定义环境变量中，「SITE_URL」值里的域名应该加上 https:// ，之前填写的是「yobome.top」，在换成「https://yobome.top」之后，重启实例，成功。","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"Blog","slug":"Tech/Blog","permalink":"https://yobome.top/categories/Tech/Blog/"}],"tags":[{"name":"blog","slug":"blog","permalink":"https://yobome.top/tags/blog/"},{"name":"踩坑","slug":"踩坑","permalink":"https://yobome.top/tags/%E8%B8%A9%E5%9D%91/"}]},{"title":"Next 升级小记","slug":"update-next-from-5-1-4","date":"2020-04-07T17:12:43.000Z","updated":"2020-04-07T18:03:37.238Z","comments":true,"path":"2020/04/08/update-next-from-5-1-4/","link":"","permalink":"https://yobome.top/2020/04/08/update-next-from-5-1-4/","excerpt":"","text":"由于一开始搭建的博客 Next 主题版本较老（5.1.4），会与一些插件的新版本出现兼容性问题，如 Valine 的 Visitor 无法显示。于是打算将 Next 升级到最新的 7.8.0 版本（较新的 Next 版本号已经无法在主题配置文件下查看，这里可以查看主题文件夹下的 package.json 文件）步骤克隆新版 Next 库在博客根目录下运行如下指令，其中后面的 “themes/next-reloaded” 为目标文件夹，可以自主命名，但必须在 themes 文件夹下git clone https://github.com/theme-next/hexo-theme-next themes/next-reloaded修改配置文件修改博客配置文件 (your_blog_path/_config.yml)theme: next-reloaded修改主题配置文件 (…/themes/next-reloaded/_config.yml)这里按照个人的插件配置、喜好来修改，附上我的修改：#关闭页面下方的「由 Hexo 驱动」等信息 powered: false #选择主题 scheme: Gemini #导航菜单设置 menu: home: / || fa fa-home categories: /categories/ || fa fa-th tags: /tags/ || fa fa-tags archives: /archives/ || fa fa-archive about: /about/ || fa fa-user #页面宽度，Gemini 的默认宽度为 240 width: 300 #开启 fancybox fancybox: true #开启评论系统与阅读量统计 valine: enable: true appid: your_app_id appkey: your_app_key notify: true verify: false placeholder: Comment Here~ avatar: retro guest_info: nick,mail,link pageSize: 10 language: visitor: true comment_count: true recordIP: false serverURLs: #post_meta_order: 0 #开启访客统计 busuanzi_count: enable: true total_visitors: true total_visitors_icon: fa fa-user total_views: true total_views_icon: fa fa-eye post_views: false post_views_icon: fa fa-eye #开启搜索插件 algolia_search: enable: true #更换 js 的 cdn fontawesome: //cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css jquery: //cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js fancybox: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js fancybox_css: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css lazyload: //cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js valine: //cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js algolia_search: //cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js instant_search: //cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js velocity: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js velocity_ui: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js踩坑Valine 评论开启后，标题下方显示的是「Valine: 0」而不是「评论数：0」在主题文件夹下的 languages 文件夹中，修改 zh-CN.yml，在 “post:” 下添加子字段 “comments.valine: 评论数”symbols_count_time 在开启后显示「阅读时长 ≈ NaN:aN」在博客配置文件下添加如下字段：12345symbols_count_time:symbols: true #显示文章字数time: true #显示文章所需阅读时间total_symbols: true #在页面底部显示网站文章总字数total_time: true #在页面底部显示网站总阅读时间在主题配置文件下添加如下字段：1234567symbols_count_time:separated_meta: trueitem_text_post: true #标题下方显示文章字数item_text_total: false #标题下方显示网站总字数#如果是中文博客，官方建议以下数值分别设置为 2、300awl: 4 #默认字符长度 Average Word Length，中文为2。wpm: 275 #默认阅读速度 Words Per Minute大功告成！如果还有什么遗漏的地方想到了再补充，有问题欢迎留言或者邮箱联系我。","categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"Blog","slug":"Tech/Blog","permalink":"https://yobome.top/categories/Tech/Blog/"}],"tags":[{"name":"blog","slug":"blog","permalink":"https://yobome.top/tags/blog/"},{"name":"踩坑","slug":"踩坑","permalink":"https://yobome.top/tags/%E8%B8%A9%E5%9D%91/"}]}],"categories":[{"name":"Tech","slug":"Tech","permalink":"https://yobome.top/categories/Tech/"},{"name":"IT","slug":"Tech/IT","permalink":"https://yobome.top/categories/Tech/IT/"},{"name":"Database","slug":"Tech/IT/Database","permalink":"https://yobome.top/categories/Tech/IT/Database/"},{"name":"Blog","slug":"Tech/Blog","permalink":"https://yobome.top/categories/Tech/Blog/"}],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://yobome.top/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"redis","slug":"redis","permalink":"https://yobome.top/tags/redis/"},{"name":"blog","slug":"blog","permalink":"https://yobome.top/tags/blog/"},{"name":"踩坑","slug":"踩坑","permalink":"https://yobome.top/tags/%E8%B8%A9%E5%9D%91/"}]}